const R = require('ramda');

var _require = require('deepmerge');

const merge = _require.all;


const collapseObjToMode = (mode, obj) => {
  return merge([{}, R.dissoc('mode', obj), R.defaultTo({}, R.view(R.lensPath(['mode', mode]), obj))]);
};

const collapsers = {
  global: collapseObjToMode,
  services: (mode, obj) => R.map(v => collapseObjToMode(mode, v), obj)
};

const getModeConfig = (mode, config) => R.mapObjIndexed((value, key) => {
  const fn = R.prop(key)(collapsers);
  return fn ? fn(mode, value) : value;
}, config);

module.exports = getModeConfig;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvZ2V0LW1vZGUtY29uZmlnLmpzIl0sIm5hbWVzIjpbIlIiLCJyZXF1aXJlIiwibWVyZ2UiLCJhbGwiLCJjb2xsYXBzZU9ialRvTW9kZSIsIm1vZGUiLCJvYmoiLCJkaXNzb2MiLCJkZWZhdWx0VG8iLCJ2aWV3IiwibGVuc1BhdGgiLCJjb2xsYXBzZXJzIiwiZ2xvYmFsIiwic2VydmljZXMiLCJtYXAiLCJ2IiwiZ2V0TW9kZUNvbmZpZyIsImNvbmZpZyIsIm1hcE9iakluZGV4ZWQiLCJ2YWx1ZSIsImtleSIsImZuIiwicHJvcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUlDLFFBQVEsT0FBUixDQUFWOztlQUNxQkEsUUFBUSxXQUFSLEM7O01BQVRDLEssWUFBTEMsRzs7O0FBRVAsTUFBTUMsb0JBQW9CLENBQUNDLElBQUQsRUFBT0MsR0FBUCxLQUFlO0FBQ3ZDLFNBQU9KLE1BQU0sQ0FDWCxFQURXLEVBRVhGLEVBQUVPLE1BQUYsQ0FBUyxNQUFULEVBQWlCRCxHQUFqQixDQUZXLEVBR1hOLEVBQUVRLFNBQUYsQ0FBWSxFQUFaLEVBQWdCUixFQUFFUyxJQUFGLENBQU9ULEVBQUVVLFFBQUYsQ0FBVyxDQUFDLE1BQUQsRUFBU0wsSUFBVCxDQUFYLENBQVAsRUFBbUNDLEdBQW5DLENBQWhCLENBSFcsQ0FBTixDQUFQO0FBS0QsQ0FORDs7QUFRQSxNQUFNSyxhQUFhO0FBQ2pCQyxVQUFRUixpQkFEUztBQUVqQlMsWUFBVSxDQUFDUixJQUFELEVBQU9DLEdBQVAsS0FBZU4sRUFBRWMsR0FBRixDQUFNQyxLQUFLWCxrQkFBa0JDLElBQWxCLEVBQXdCVSxDQUF4QixDQUFYLEVBQXVDVCxHQUF2QztBQUZSLENBQW5COztBQUtBLE1BQU1VLGdCQUFnQixDQUFDWCxJQUFELEVBQU9ZLE1BQVAsS0FBa0JqQixFQUFFa0IsYUFBRixDQUN0QyxDQUFDQyxLQUFELEVBQVFDLEdBQVIsS0FBZ0I7QUFDZCxRQUFNQyxLQUFLckIsRUFBRXNCLElBQUYsQ0FBT0YsR0FBUCxFQUFZVCxVQUFaLENBQVg7QUFDQSxTQUFPVSxLQUFLQSxHQUFHaEIsSUFBSCxFQUFTYyxLQUFULENBQUwsR0FBdUJBLEtBQTlCO0FBQ0QsQ0FKcUMsRUFLdENGLE1BTHNDLENBQXhDOztBQVFBTSxPQUFPQyxPQUFQLEdBQWlCUixhQUFqQiIsImZpbGUiOiJnZXQtbW9kZS1jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSID0gcmVxdWlyZSgncmFtZGEnKVxuY29uc3Qge2FsbDogbWVyZ2V9ID0gcmVxdWlyZSgnZGVlcG1lcmdlJylcblxuY29uc3QgY29sbGFwc2VPYmpUb01vZGUgPSAobW9kZSwgb2JqKSA9PiB7XG4gIHJldHVybiBtZXJnZShbXG4gICAge30sXG4gICAgUi5kaXNzb2MoJ21vZGUnLCBvYmopLFxuICAgIFIuZGVmYXVsdFRvKHt9LCBSLnZpZXcoUi5sZW5zUGF0aChbJ21vZGUnLCBtb2RlXSksIG9iaikpXG4gIF0pXG59XG5cbmNvbnN0IGNvbGxhcHNlcnMgPSB7XG4gIGdsb2JhbDogY29sbGFwc2VPYmpUb01vZGUsXG4gIHNlcnZpY2VzOiAobW9kZSwgb2JqKSA9PiBSLm1hcCh2ID0+IGNvbGxhcHNlT2JqVG9Nb2RlKG1vZGUsIHYpLCBvYmopXG59XG5cbmNvbnN0IGdldE1vZGVDb25maWcgPSAobW9kZSwgY29uZmlnKSA9PiBSLm1hcE9iakluZGV4ZWQoXG4gICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgY29uc3QgZm4gPSBSLnByb3Aoa2V5KShjb2xsYXBzZXJzKVxuICAgIHJldHVybiBmbiA/IGZuKG1vZGUsIHZhbHVlKSA6IHZhbHVlXG4gIH0sXG4gIGNvbmZpZ1xuKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE1vZGVDb25maWdcbiJdfQ==