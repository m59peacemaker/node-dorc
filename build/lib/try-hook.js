const R = require('ramda');
const runHook = require('./run-hook');

const validHooks = ['init', 'before-up'];

const tryHook = (hookName, config) => {
  if (R.not(R.contains(hookName, validHooks))) {
    throw new Error(`"${ hookName }" is not a supported hook`);
  }
  const hook = R.view(R.lensPath(['hooks', hookName]), config);
  return R.ifElse(() => R.isNil(hook), () => Promise.resolve(), () => runHook(hook, hookName, config.serviceName))();
};

module.exports = tryHook;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvdHJ5LWhvb2suanMiXSwibmFtZXMiOlsiUiIsInJlcXVpcmUiLCJydW5Ib29rIiwidmFsaWRIb29rcyIsInRyeUhvb2siLCJob29rTmFtZSIsImNvbmZpZyIsIm5vdCIsImNvbnRhaW5zIiwiRXJyb3IiLCJob29rIiwidmlldyIsImxlbnNQYXRoIiwiaWZFbHNlIiwiaXNOaWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNlcnZpY2VOYW1lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsSUFBSUMsUUFBUSxPQUFSLENBQVY7QUFDQSxNQUFNQyxVQUFVRCxRQUFRLFlBQVIsQ0FBaEI7O0FBRUEsTUFBTUUsYUFBYSxDQUNqQixNQURpQixFQUVqQixXQUZpQixDQUFuQjs7QUFLQSxNQUFNQyxVQUFVLENBQUNDLFFBQUQsRUFBV0MsTUFBWCxLQUFzQjtBQUNwQyxNQUFJTixFQUFFTyxHQUFGLENBQU1QLEVBQUVRLFFBQUYsQ0FBV0gsUUFBWCxFQUFxQkYsVUFBckIsQ0FBTixDQUFKLEVBQTZDO0FBQzNDLFVBQU0sSUFBSU0sS0FBSixDQUFXLEtBQUdKLFFBQVMsNEJBQXZCLENBQU47QUFDRDtBQUNELFFBQU1LLE9BQU9WLEVBQUVXLElBQUYsQ0FBT1gsRUFBRVksUUFBRixDQUFXLENBQUMsT0FBRCxFQUFVUCxRQUFWLENBQVgsQ0FBUCxFQUF3Q0MsTUFBeEMsQ0FBYjtBQUNBLFNBQU9OLEVBQUVhLE1BQUYsQ0FDTCxNQUFNYixFQUFFYyxLQUFGLENBQVFKLElBQVIsQ0FERCxFQUVMLE1BQU1LLFFBQVFDLE9BQVIsRUFGRCxFQUdMLE1BQU1kLFFBQVFRLElBQVIsRUFBY0wsUUFBZCxFQUF3QkMsT0FBT1csV0FBL0IsQ0FIRCxHQUFQO0FBS0QsQ0FWRDs7QUFZQUMsT0FBT0MsT0FBUCxHQUFpQmYsT0FBakIiLCJmaWxlIjoidHJ5LWhvb2suanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSID0gcmVxdWlyZSgncmFtZGEnKVxuY29uc3QgcnVuSG9vayA9IHJlcXVpcmUoJy4vcnVuLWhvb2snKVxuXG5jb25zdCB2YWxpZEhvb2tzID0gW1xuICAnaW5pdCcsXG4gICdiZWZvcmUtdXAnXG5dXG5cbmNvbnN0IHRyeUhvb2sgPSAoaG9va05hbWUsIGNvbmZpZykgPT4ge1xuICBpZiAoUi5ub3QoUi5jb250YWlucyhob29rTmFtZSwgdmFsaWRIb29rcykpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7aG9va05hbWV9XCIgaXMgbm90IGEgc3VwcG9ydGVkIGhvb2tgKVxuICB9XG4gIGNvbnN0IGhvb2sgPSBSLnZpZXcoUi5sZW5zUGF0aChbJ2hvb2tzJywgaG9va05hbWVdKSwgY29uZmlnKVxuICByZXR1cm4gUi5pZkVsc2UoXG4gICAgKCkgPT4gUi5pc05pbChob29rKSxcbiAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSxcbiAgICAoKSA9PiBydW5Ib29rKGhvb2ssIGhvb2tOYW1lLCBjb25maWcuc2VydmljZU5hbWUpXG4gICkoKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyeUhvb2tcbiJdfQ==