const R = require('ramda');

const wrapInArray = v => [v];
const ensureArray = R.ifElse(Array.isArray, R.identity, wrapInArray);

const normalize = R.over(R.lensProp('services'), R.pipe(R.toPairs, R.map(R.over(R.lensIndex(1), R.over(R.lensProp('image'), R.ifElse(R.is(String), R.identity, R.pipe(ensureArray, R.map(R.over(R.lensProp('tags'), ensureArray))))))), R.fromPairs));

module.exports = normalize;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvbm9ybWFsaXplLWNvbmZpZy5qcyJdLCJuYW1lcyI6WyJSIiwicmVxdWlyZSIsIndyYXBJbkFycmF5IiwidiIsImVuc3VyZUFycmF5IiwiaWZFbHNlIiwiQXJyYXkiLCJpc0FycmF5IiwiaWRlbnRpdHkiLCJub3JtYWxpemUiLCJvdmVyIiwibGVuc1Byb3AiLCJwaXBlIiwidG9QYWlycyIsIm1hcCIsImxlbnNJbmRleCIsImlzIiwiU3RyaW5nIiwiZnJvbVBhaXJzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsSUFBSUMsUUFBUSxPQUFSLENBQVY7O0FBRUEsTUFBTUMsY0FBZUMsQ0FBRCxJQUFPLENBQUNBLENBQUQsQ0FBM0I7QUFDQSxNQUFNQyxjQUFjSixFQUFFSyxNQUFGLENBQVNDLE1BQU1DLE9BQWYsRUFBd0JQLEVBQUVRLFFBQTFCLEVBQW9DTixXQUFwQyxDQUFwQjs7QUFFQSxNQUFNTyxZQUFZVCxFQUFFVSxJQUFGLENBQ2hCVixFQUFFVyxRQUFGLENBQVcsVUFBWCxDQURnQixFQUVoQlgsRUFBRVksSUFBRixDQUNFWixFQUFFYSxPQURKLEVBRUViLEVBQUVjLEdBQUYsQ0FDRWQsRUFBRVUsSUFBRixDQUNFVixFQUFFZSxTQUFGLENBQVksQ0FBWixDQURGLEVBRUVmLEVBQUVVLElBQUYsQ0FBT1YsRUFBRVcsUUFBRixDQUFXLE9BQVgsQ0FBUCxFQUE0QlgsRUFBRUssTUFBRixDQUMxQkwsRUFBRWdCLEVBQUYsQ0FBS0MsTUFBTCxDQUQwQixFQUUxQmpCLEVBQUVRLFFBRndCLEVBRzFCUixFQUFFWSxJQUFGLENBQ0VSLFdBREYsRUFFRUosRUFBRWMsR0FBRixDQUFNZCxFQUFFVSxJQUFGLENBQU9WLEVBQUVXLFFBQUYsQ0FBVyxNQUFYLENBQVAsRUFBMkJQLFdBQTNCLENBQU4sQ0FGRixDQUgwQixDQUE1QixDQUZGLENBREYsQ0FGRixFQWVFSixFQUFFa0IsU0FmSixDQUZnQixDQUFsQjs7QUFxQkFDLE9BQU9DLE9BQVAsR0FBaUJYLFNBQWpCIiwiZmlsZSI6Im5vcm1hbGl6ZS1jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSID0gcmVxdWlyZSgncmFtZGEnKVxuXG5jb25zdCB3cmFwSW5BcnJheSA9ICh2KSA9PiBbdl1cbmNvbnN0IGVuc3VyZUFycmF5ID0gUi5pZkVsc2UoQXJyYXkuaXNBcnJheSwgUi5pZGVudGl0eSwgd3JhcEluQXJyYXkpXG5cbmNvbnN0IG5vcm1hbGl6ZSA9IFIub3ZlcihcbiAgUi5sZW5zUHJvcCgnc2VydmljZXMnKSxcbiAgUi5waXBlKFxuICAgIFIudG9QYWlycyxcbiAgICBSLm1hcChcbiAgICAgIFIub3ZlcihcbiAgICAgICAgUi5sZW5zSW5kZXgoMSksXG4gICAgICAgIFIub3ZlcihSLmxlbnNQcm9wKCdpbWFnZScpLCBSLmlmRWxzZShcbiAgICAgICAgICBSLmlzKFN0cmluZyksXG4gICAgICAgICAgUi5pZGVudGl0eSxcbiAgICAgICAgICBSLnBpcGUoXG4gICAgICAgICAgICBlbnN1cmVBcnJheSxcbiAgICAgICAgICAgIFIubWFwKFIub3ZlcihSLmxlbnNQcm9wKCd0YWdzJyksIGVuc3VyZUFycmF5KSlcbiAgICAgICAgICApXG4gICAgICAgICkpXG4gICAgICApXG4gICAgKSxcbiAgICBSLmZyb21QYWlyc1xuICApXG4pXG5cbm1vZHVsZS5leHBvcnRzID0gbm9ybWFsaXplXG4iXX0=