const R = require('ramda');

var _require = require('ramda-fantasy');

const Future = _require.Future;

const futurify = require('../../futurify-p')(Future);
const promisify = require('../../promisify-f');

const modeConfig = {
  services: [{ env: { foo: 'val' } }, { image: 'pmkr/nginx' }],
  with: ['../app']
};

const prepare = R.pipe(R.over(R.lensProp('services'), R.filter(R.has('image'))), R.lensProp('with')(R.ifElse(R.isNil, Future.of, futurify(path => Promise.resolve({ bar: 'val' })))));

promisify(prepare)(modeConfig).then(console.log);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hLmpzIl0sIm5hbWVzIjpbIlIiLCJyZXF1aXJlIiwiRnV0dXJlIiwiZnV0dXJpZnkiLCJwcm9taXNpZnkiLCJtb2RlQ29uZmlnIiwic2VydmljZXMiLCJlbnYiLCJmb28iLCJpbWFnZSIsIndpdGgiLCJwcmVwYXJlIiwicGlwZSIsIm92ZXIiLCJsZW5zUHJvcCIsImZpbHRlciIsImhhcyIsImlmRWxzZSIsImlzTmlsIiwib2YiLCJwYXRoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJiYXIiLCJ0aGVuIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsSUFBSUMsUUFBUSxPQUFSLENBQVY7O2VBQ2lCQSxRQUFRLGVBQVIsQzs7TUFBVkMsTSxZQUFBQSxNOztBQUNQLE1BQU1DLFdBQVdGLFFBQVEsa0JBQVIsRUFBNEJDLE1BQTVCLENBQWpCO0FBQ0EsTUFBTUUsWUFBWUgsUUFBUSxtQkFBUixDQUFsQjs7QUFFQSxNQUFNSSxhQUFhO0FBQ2pCQyxZQUFVLENBQ1IsRUFBQ0MsS0FBSyxFQUFDQyxLQUFLLEtBQU4sRUFBTixFQURRLEVBRVIsRUFBQ0MsT0FBTyxZQUFSLEVBRlEsQ0FETztBQUtqQkMsUUFBTSxDQUFDLFFBQUQ7QUFMVyxDQUFuQjs7QUFRQSxNQUFNQyxVQUFVWCxFQUFFWSxJQUFGLENBQ2RaLEVBQUVhLElBQUYsQ0FDRWIsRUFBRWMsUUFBRixDQUFXLFVBQVgsQ0FERixFQUVFZCxFQUFFZSxNQUFGLENBQVNmLEVBQUVnQixHQUFGLENBQU0sT0FBTixDQUFULENBRkYsQ0FEYyxFQUtkaEIsRUFBRWMsUUFBRixDQUFXLE1BQVgsRUFDRWQsRUFBRWlCLE1BQUYsQ0FDRWpCLEVBQUVrQixLQURKLEVBRUVoQixPQUFPaUIsRUFGVCxFQUdFaEIsU0FBU2lCLFFBQVFDLFFBQVFDLE9BQVIsQ0FBZ0IsRUFBQ0MsS0FBSyxLQUFOLEVBQWhCLENBQWpCLENBSEYsQ0FERixDQUxjLENBQWhCOztBQWNBbkIsVUFBVU8sT0FBVixFQUFtQk4sVUFBbkIsRUFBK0JtQixJQUEvQixDQUFvQ0MsUUFBUUMsR0FBNUMiLCJmaWxlIjoiYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFIgPSByZXF1aXJlKCdyYW1kYScpXG5jb25zdCB7RnV0dXJlfSA9IHJlcXVpcmUoJ3JhbWRhLWZhbnRhc3knKVxuY29uc3QgZnV0dXJpZnkgPSByZXF1aXJlKCcuLi8uLi9mdXR1cmlmeS1wJykoRnV0dXJlKVxuY29uc3QgcHJvbWlzaWZ5ID0gcmVxdWlyZSgnLi4vLi4vcHJvbWlzaWZ5LWYnKVxuXG5jb25zdCBtb2RlQ29uZmlnID0ge1xuICBzZXJ2aWNlczogW1xuICAgIHtlbnY6IHtmb286ICd2YWwnfX0sXG4gICAge2ltYWdlOiAncG1rci9uZ2lueCd9XG4gIF0sXG4gIHdpdGg6IFsnLi4vYXBwJ11cbn1cblxuY29uc3QgcHJlcGFyZSA9IFIucGlwZShcbiAgUi5vdmVyKFxuICAgIFIubGVuc1Byb3AoJ3NlcnZpY2VzJyksXG4gICAgUi5maWx0ZXIoUi5oYXMoJ2ltYWdlJykpXG4gICksXG4gIFIubGVuc1Byb3AoJ3dpdGgnKShcbiAgICBSLmlmRWxzZShcbiAgICAgIFIuaXNOaWwsXG4gICAgICBGdXR1cmUub2YsXG4gICAgICBmdXR1cmlmeShwYXRoID0+IFByb21pc2UucmVzb2x2ZSh7YmFyOiAndmFsJ30pKVxuICAgIClcbiAgKVxuKVxuXG5wcm9taXNpZnkocHJlcGFyZSkobW9kZUNvbmZpZykudGhlbihjb25zb2xlLmxvZylcbiJdfQ==