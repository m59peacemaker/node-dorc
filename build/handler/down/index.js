var _require = require('child_process');

const spawn = _require.spawn;

// TODO: custom output instead of the unhelpful docker output

const stop = container => {
  // TODO: promisify(spawn)
  return new Promise((resolve, reject) => {
    const p = spawn('docker', ['stop', container], { stdio: 'inherit' });
    p.on('close', code => code !== 0 ? reject(code) : resolve());
  });
};

const rm = container => {
  // TODO: promisify(spawn)
  return new Promise((resolve, reject) => {
    const p = spawn('docker', ['rm', container], { stdio: 'inherit' });
    p.on('close', code => code !== 0 ? reject(code) : resolve());
  });
};

const down = service => stop(service.container).then(() => rm(service.container));

module.exports = down;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9oYW5kbGVyL2Rvd24vaW5kZXguanMiXSwibmFtZXMiOlsicmVxdWlyZSIsInNwYXduIiwic3RvcCIsImNvbnRhaW5lciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicCIsInN0ZGlvIiwib24iLCJjb2RlIiwicm0iLCJkb3duIiwic2VydmljZSIsInRoZW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiZUFBZ0JBLFFBQVEsZUFBUixDOztNQUFUQyxLLFlBQUFBLEs7O0FBRVA7O0FBQ0EsTUFBTUMsT0FBT0MsYUFBYTtBQUN4QjtBQUNBLFNBQU8sSUFBSUMsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUN0QyxVQUFNQyxJQUFJTixNQUFNLFFBQU4sRUFBZ0IsQ0FBQyxNQUFELEVBQVNFLFNBQVQsQ0FBaEIsRUFBcUMsRUFBQ0ssT0FBTyxTQUFSLEVBQXJDLENBQVY7QUFDQUQsTUFBRUUsRUFBRixDQUFLLE9BQUwsRUFBY0MsUUFBUUEsU0FBUyxDQUFULEdBQWFKLE9BQU9JLElBQVAsQ0FBYixHQUE0QkwsU0FBbEQ7QUFDRCxHQUhNLENBQVA7QUFJRCxDQU5EOztBQVFBLE1BQU1NLEtBQUtSLGFBQWE7QUFDdEI7QUFDQSxTQUFPLElBQUlDLE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7QUFDdEMsVUFBTUMsSUFBSU4sTUFBTSxRQUFOLEVBQWdCLENBQUMsSUFBRCxFQUFPRSxTQUFQLENBQWhCLEVBQW1DLEVBQUNLLE9BQU8sU0FBUixFQUFuQyxDQUFWO0FBQ0FELE1BQUVFLEVBQUYsQ0FBSyxPQUFMLEVBQWNDLFFBQVFBLFNBQVMsQ0FBVCxHQUFhSixPQUFPSSxJQUFQLENBQWIsR0FBNEJMLFNBQWxEO0FBQ0QsR0FITSxDQUFQO0FBSUQsQ0FORDs7QUFRQSxNQUFNTyxPQUFPQyxXQUFXWCxLQUFLVyxRQUFRVixTQUFiLEVBQXdCVyxJQUF4QixDQUE2QixNQUFNSCxHQUFHRSxRQUFRVixTQUFYLENBQW5DLENBQXhCOztBQUVBWSxPQUFPQyxPQUFQLEdBQWlCSixJQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtzcGF3bn0gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJylcblxuLy8gVE9ETzogY3VzdG9tIG91dHB1dCBpbnN0ZWFkIG9mIHRoZSB1bmhlbHBmdWwgZG9ja2VyIG91dHB1dFxuY29uc3Qgc3RvcCA9IGNvbnRhaW5lciA9PiB7XG4gIC8vIFRPRE86IHByb21pc2lmeShzcGF3bilcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBwID0gc3Bhd24oJ2RvY2tlcicsIFsnc3RvcCcsIGNvbnRhaW5lcl0sIHtzdGRpbzogJ2luaGVyaXQnfSlcbiAgICBwLm9uKCdjbG9zZScsIGNvZGUgPT4gY29kZSAhPT0gMCA/IHJlamVjdChjb2RlKSA6IHJlc29sdmUoKSlcbiAgfSlcbn1cblxuY29uc3Qgcm0gPSBjb250YWluZXIgPT4ge1xuICAvLyBUT0RPOiBwcm9taXNpZnkoc3Bhd24pXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcCA9IHNwYXduKCdkb2NrZXInLCBbJ3JtJywgY29udGFpbmVyXSwge3N0ZGlvOiAnaW5oZXJpdCd9KVxuICAgIHAub24oJ2Nsb3NlJywgY29kZSA9PiBjb2RlICE9PSAwID8gcmVqZWN0KGNvZGUpIDogcmVzb2x2ZSgpKVxuICB9KVxufVxuXG5jb25zdCBkb3duID0gc2VydmljZSA9PiBzdG9wKHNlcnZpY2UuY29udGFpbmVyKS50aGVuKCgpID0+IHJtKHNlcnZpY2UuY29udGFpbmVyKSlcblxubW9kdWxlLmV4cG9ydHMgPSBkb3duXG4iXX0=