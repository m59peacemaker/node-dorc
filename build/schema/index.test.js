const test = require('tape');
const schemas = {
  image: require('./service/image'),
  service: require('./service'),
  services: require('./services'),
  config: require('./config')
};

const tests = {
  image: {
    good: ['some-tag', { tag: 'foo', file: './Dockerfile' }, { tag: ['foo', 'bar'], file: './Dockerfile' }, { tag: 'foo', file: './Dockerfile' }, { tag: 'foo', args: { foo: 'bar', bar: 132 }, file: './Dockerfile' }, { tag: 'foo', context: './hue', file: './Dockerfile' }, [{ tag: 'foo', file: './Dockerfile' }, { tag: ['foo', 'bar'], file: 'whatver.file' }], [{ tag: 'foo', file: 'first' }, { tag: ['foo', 'bar'], file: '/second.file' }]],
    bad: [123, '', false, { tag: 'foo' }, { file: './Dockerfile' }, { tag: 123, file: './Dockerfile' }, { tag: {}, file: './Dockerfile' }, { tag: '', file: './Dockerfile' }, { tag: true, file: './Dockerfile' }, { tag: false, file: './Dockerfile' }, { tag: 'foo', file: 123 }, { tag: 'foo', file: '' }, { tag: 'foo', file: './Dockerfile', args: { foo: {} } }, { tag: 'foo', file: './Dockerfile', args: { foo: [] } }, { tag: 'foo', file: './Dockerfile', context: {} }, { tag: 'foo', file: './Dockerfile', context: true }, ['foo', 'bar']]
  },
  service: {
    good: [{ net: 'host', env: { FOO: 'bar' }, image: 'alpine' }, {
      user: 1000,
      image: [{ tag: 'foo', file: 'docker' }, { tag: ['foo', 'bar'], file: 'foo/Dockerfile' }]
    }],
    bad: [true, '123', [], { image: ['foo', 'bar'] }]
  },
  config: {
    good: [{
      defaultMode: 'dev',
      locals: './config.yaml',
      services: {
        foo: {
          image: 'hey'
        },
        bar: {
          env: {
            FOO: 'bar',
            image: {
              file: './Dockerfile',
              tag: ['foo', 'bar']
            }
          }
        }
      }
    }],
    bad: [{ defaultMode: [] }, { locals: {} }, { services: { foo: { image: {} } } }]
  }
};

Object.keys(tests).forEach(type => {
  const schema = schemas[type].loose;
  const typeTests = tests[type];
  test(`schema | config-mode-expanded | ${ type }`, t => {
    typeTests.good.forEach(data => {
      var _schema$validate = schema.validate(data);

      const error = _schema$validate.error,
            result = _schema$validate.result;

      error ? console.log(data) && t.fail(error) : t.pass();
    });
    typeTests.bad.forEach(data => {
      var _schema$validate2 = schema.validate(data);

      const error = _schema$validate2.error,
            result = _schema$validate2.result;

      if (error) {
        t.pass();
      } else {
        console.log(data);
        t.fail();
      }
    });
    t.end();
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY2hlbWEvaW5kZXgudGVzdC5qcyJdLCJuYW1lcyI6WyJ0ZXN0IiwicmVxdWlyZSIsInNjaGVtYXMiLCJpbWFnZSIsInNlcnZpY2UiLCJzZXJ2aWNlcyIsImNvbmZpZyIsInRlc3RzIiwiZ29vZCIsInRhZyIsImZpbGUiLCJhcmdzIiwiZm9vIiwiYmFyIiwiY29udGV4dCIsImJhZCIsIm5ldCIsImVudiIsIkZPTyIsInVzZXIiLCJkZWZhdWx0TW9kZSIsImxvY2FscyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwidHlwZSIsInNjaGVtYSIsImxvb3NlIiwidHlwZVRlc3RzIiwidCIsImRhdGEiLCJ2YWxpZGF0ZSIsImVycm9yIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsImZhaWwiLCJwYXNzIiwiZW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPQyxRQUFRLE1BQVIsQ0FBYjtBQUNBLE1BQU1DLFVBQVU7QUFDZEMsU0FBT0YsUUFBUSxpQkFBUixDQURPO0FBRWRHLFdBQVNILFFBQVEsV0FBUixDQUZLO0FBR2RJLFlBQVVKLFFBQVEsWUFBUixDQUhJO0FBSWRLLFVBQVFMLFFBQVEsVUFBUjtBQUpNLENBQWhCOztBQU9BLE1BQU1NLFFBQVE7QUFDWkosU0FBTztBQUNMSyxVQUFNLENBQ0osVUFESSxFQUVKLEVBQUNDLEtBQUssS0FBTixFQUFhQyxNQUFNLGNBQW5CLEVBRkksRUFHSixFQUFDRCxLQUFLLENBQUMsS0FBRCxFQUFRLEtBQVIsQ0FBTixFQUFzQkMsTUFBTSxjQUE1QixFQUhJLEVBSUosRUFBQ0QsS0FBSyxLQUFOLEVBQWFDLE1BQU0sY0FBbkIsRUFKSSxFQUtKLEVBQUNELEtBQUssS0FBTixFQUFhRSxNQUFNLEVBQUNDLEtBQUssS0FBTixFQUFhQyxLQUFLLEdBQWxCLEVBQW5CLEVBQTJDSCxNQUFNLGNBQWpELEVBTEksRUFNSixFQUFDRCxLQUFLLEtBQU4sRUFBYUssU0FBUyxPQUF0QixFQUErQkosTUFBTSxj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QUE3QjtBQUNBLFFBQU1DLFlBQVlyQixNQUFNa0IsSUFBTixDQUFsQjtBQUNBekIsT0FBTSxvQ0FBa0N5QixJQUFLLEdBQTdDLEVBQWdESSxLQUFLO0FBQ25ERCxjQUFVcEIsSUFBVixDQUFlZ0IsT0FBZixDQUF1Qk0sUUFBUTtBQUFBLDZCQUNMSixPQUFPSyxRQUFQLENBQWdCRCxJQUFoQixDQURLOztBQUFBLFlBQ3RCRSxLQURzQixvQkFDdEJBLEtBRHNCO0FBQUEsWUFDZkMsTUFEZSxvQkFDZkEsTUFEZTs7QUFFN0JELGNBQVFFLFFBQVFDLEdBQVIsQ0FBWUwsSUFBWixLQUFxQkQsRUFBRU8sSUFBRixDQUFPSixLQUFQLENBQTdCLEdBQTZDSCxFQUFFUSxJQUFGLEVBQTdDO0FBQ0QsS0FIRDtBQUlBVCxjQUFVYixHQUFWLENBQWNTLE9BQWQsQ0FBc0JNLFFBQVE7QUFBQSw4QkFDSkosT0FBT0ssUUFBUCxDQUFnQkQsSUFBaEIsQ0FESTs7QUFBQSxZQUNyQkUsS0FEcUIscUJBQ3JCQSxLQURxQjtBQUFBLFlBQ2RDLE1BRGMscUJBQ2RBLE1BRGM7O0FBRTVCLFVBQUlELEtBQUosRUFBVztBQUNUSCxVQUFFUSxJQUFGO0FBQ0QsT0FGRCxNQUVPO0FBQ0xILGdCQUFRQyxHQUFSLENBQVlMLElBQVo7QUFDQUQsVUFBRU8sSUFBRjtBQUNEO0FBQ0YsS0FSRDtBQVNBUCxNQUFFUyxHQUFGO0FBQ0QsR0FmRDtBQWdCRCxDQW5CRCIsImZpbGUiOiJpbmRleC50ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdGVzdCA9IHJlcXVpcmUoJ3RhcGUnKVxuY29uc3Qgc2NoZW1hcyA9IHtcbiAgaW1hZ2U6IHJlcXVpcmUoJy4vc2VydmljZS9pbWFnZScpLFxuICBzZXJ2aWNlOiByZXF1aXJlKCcuL3NlcnZpY2UnKSxcbiAgc2VydmljZXM6IHJlcXVpcmUoJy4vc2VydmljZXMnKSxcbiAgY29uZmlnOiByZXF1aXJlKCcuL2NvbmZpZycpXG59XG5cbmNvbnN0IHRlc3RzID0ge1xuICBpbWFnZToge1xuICAgIGdvb2Q6IFtcbiAgICAgICdzb21lLXRhZycsXG4gICAgICB7dGFnOiAnZm9vJywgZmlsZTogJy4vRG9ja2VyZmlsZSd9LFxuICAgICAge3RhZzogWydmb28nLCAnYmFyJ10sIGZpbGU6ICcuL0RvY2tlcmZpbGUnfSxcbiAgICAgIHt0YWc6ICdmb28nLCBmaWxlOiAnLi9Eb2NrZXJmaWxlJ30sXG4gICAgICB7dGFnOiAnZm9vJywgYXJnczoge2ZvbzogJ2JhcicsIGJhcjogMTMyfSwgZmlsZTogJy4vRG9ja2VyZmlsZSd9LFxuICAgICAge3RhZzogJ2ZvbycsIGNvbnRleHQ6ICcuL2h1ZScsIGZpbGU6ICcuL0RvY2tlcmZpbGUnfSxcbiAgICAgIFt7dGFnOiAnZm9vJywgZmlsZTogJy4vRG9ja2VyZmlsZSd9LCB7dGFnOiBbJ2ZvbycsICdiYXInXSwgZmlsZTogJ3doYXR2ZXIuZmlsZSd9XSxcbiAgICAgIFt7dGFnOiAnZm9vJywgZmlsZTogJ2ZpcnN0J30sIHt0YWc6IFsnZm9vJywgJ2JhciddLCBmaWxlOiAnL3NlY29uZC5maWxlJ31dLFxuICAgIF0sXG4gICAgYmFkOiBbXG4gICAgICAxMjMsXG4gICAgICAnJyxcbiAgICAgIGZhbHNlLFxuICAgICAge3RhZzogJ2Zvbyd9LFxuICAgICAge2ZpbGU6ICcuL0RvY2tlcmZpbGUnfSxcbiAgICAgIHt0YWc6IDEyMywgZmlsZTogJy4vRG9ja2VyZmlsZSd9LFxuICAgICAge3RhZzoge30sIGZpbGU6ICcuL0RvY2tlcmZpbGUnfSxcbiAgICAgIHt0YWc6ICcnLCBmaWxlOiAnLi9Eb2NrZXJmaWxlJ30sXG4gICAgICB7dGFnOiB0cnVlLCBmaWxlOiAnLi9Eb2NrZXJmaWxlJ30sXG4gICAgICB7dGFnOiBmYWxzZSwgZmlsZTogJy4vRG9ja2VyZmlsZSd9LFxuICAgICAge3RhZzogJ2ZvbycsIGZpbGU6IDEyM30sXG4gICAgICB7dGFnOiAnZm9vJywgZmlsZTogJyd9LFxuICAgICAge3RhZzogJ2ZvbycsIGZpbGU6ICcuL0RvY2tlcmZpbGUnLCBhcmdzOiB7Zm9vOiB7fX19LFxuICAgICAge3RhZzogJ2ZvbycsIGZpbGU6ICcuL0RvY2tlcmZpbGUnLCBhcmdzOiB7Zm9vOiBbXX19LFxuICAgICAge3RhZzogJ2ZvbycsIGZpbGU6ICcuL0RvY2tlcmZpbGUnLCBjb250ZXh0OiB7fX0sXG4gICAgICB7dGFnOiAnZm9vJywgZmlsZTogJy4vRG9ja2VyZmlsZScsIGNvbnRleHQ6IHRydWV9LFxuICAgICAgWydmb28nLCAnYmFyJ11cbiAgICBdXG4gIH0sXG4gIHNlcnZpY2U6IHtcbiAgICBnb29kOiBbXG4gICAgICB7bmV0OiAnaG9zdCcsIGVudjoge0ZPTzogJ2Jhcid9LCBpbWFnZTogJ2FscGluZSd9LFxuICAgICAge1xuICAgICAgICB1c2VyOiAxMDAwLFxuICAgICAgICBpbWFnZTogW1xuICAgICAgICAgIHt0YWc6ICdmb28nLCBmaWxlOiAnZG9ja2VyJ30sXG4gICAgICAgICAge3RhZzogWydmb28nLCAnYmFyJ10sIGZpbGU6ICdmb28vRG9ja2VyZmlsZSd9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICBdLFxuICAgIGJhZDogW1xuICAgICAgdHJ1ZSxcbiAgICAgICcxMjMnLFxuICAgICAgW10sXG4gICAgICB7aW1hZ2U6IFsnZm9vJywgJ2JhciddfVxuICAgIF1cbiAgfSxcbiAgY29uZmlnOiB7XG4gICAgZ29vZDogW1xuICAgICAge1xuICAgICAgICBkZWZhdWx0TW9kZTogJ2RldicsXG4gICAgICAgIGxvY2FsczogJy4vY29uZmlnLnlhbWwnLFxuICAgICAgICBzZXJ2aWNlczoge1xuICAgICAgICAgIGZvbzoge1xuICAgICAgICAgICAgaW1hZ2U6ICdoZXknXG4gICAgICAgICAgfSxcbiAgICAgICAgICBiYXI6IHtcbiAgICAgICAgICAgIGVudjoge1xuICAgICAgICAgICAgICBGT086ICdiYXInLFxuICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgIGZpbGU6ICcuL0RvY2tlcmZpbGUnLFxuICAgICAgICAgICAgICAgIHRhZzogWydmb28nLCAnYmFyJ11cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIF0sXG4gICAgYmFkOiBbXG4gICAgICB7ZGVmYXVsdE1vZGU6IFtdfSxcbiAgICAgIHtsb2NhbHM6IHt9fSxcbiAgICAgIHtzZXJ2aWNlczoge2Zvbzoge2ltYWdlOiB7fX19fVxuICAgIF1cbiAgfVxufVxuXG5PYmplY3Qua2V5cyh0ZXN0cykuZm9yRWFjaCh0eXBlID0+IHtcbiAgY29uc3Qgc2NoZW1hID0gc2NoZW1hc1t0eXBlXS5sb29zZVxuICBjb25zdCB0eXBlVGVzdHMgPSB0ZXN0c1t0eXBlXVxuICB0ZXN0KGBzY2hlbWEgfCBjb25maWctbW9kZS1leHBhbmRlZCB8ICR7dHlwZX1gLCB0ID0+IHtcbiAgICB0eXBlVGVzdHMuZ29vZC5mb3JFYWNoKGRhdGEgPT4ge1xuICAgICAgY29uc3Qge2Vycm9yLCByZXN1bHR9ID0gc2NoZW1hLnZhbGlkYXRlKGRhdGEpXG4gICAgICBlcnJvciA/IGNvbnNvbGUubG9nKGRhdGEpICYmIHQuZmFpbChlcnJvcikgOiB0LnBhc3MoKVxuICAgIH0pXG4gICAgdHlwZVRlc3RzLmJhZC5mb3JFYWNoKGRhdGEgPT4ge1xuICAgICAgY29uc3Qge2Vycm9yLCByZXN1bHR9ID0gc2NoZW1hLnZhbGlkYXRlKGRhdGEpXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdC5wYXNzKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICAgIHQuZmFpbCgpXG4gICAgICB9XG4gICAgfSlcbiAgICB0LmVuZCgpXG4gIH0pXG59KVxuIl19